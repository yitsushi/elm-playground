<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Main</title>
  <style>
    body { padding: 0; margin: 0; }
    a { margin: 0.2em; padding: 0.4em; background-color: rgb(248, 203, 252); }
    div { margin: 1em; }
  </style>
	<script type="text/javascript" src="/application.js"></script>
</head>

<body>

<noscript>
  You need to enable JavaScript to run this app.
</noscript>
<div id="elm"></div>

<script>
const tokenKey = "__myToken"

const app = Elm.Main.init({
    node: document.getElementById('elm'),
    flags:
    { storedToken: localStorage.getItem("__myToken")
    , gitea:
      { clientID: "5eeec0c2-eb26-4cf4-8101-67c76c69cf50"
      , redirectURI: "http://localhost:8000/signin/callback"
      , authServer: "https://gitea.code-infection.com"
      , authorizePath: "/login/oauth/authorize"
      , accessTokenPath: "/login/oauth/access_token"
      }
    }
});

// app.ports.sendTokenToStorage.subscribe(token => {
//   localStorage.setItem("__myToken", token)
// });
</script>

</body>
</html>